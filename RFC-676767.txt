# RFC 676767: Sound-QR - Audio-Embedded QR Code Encoding Protocol

**Request for Comments: 676767**
**Category: Experimental**
**Date: January 2026**

---

## Abstract

This document specifies the Sound-QR protocol, a method for encoding QR code data into audio files using high-frequency sound encoding techniques. The protocol enables embedding QR codes into existing audio content while preserving the original audio quality, and supports decoding from both audio files and real-time microphone input. The specification defines frequency allocation, timing structures, error correction mechanisms, and device compatibility requirements for reliable cross-platform implementation.

## 1. Introduction

### 1.1 Purpose

Sound-QR addresses the need for inaudible data transmission through audio channels while maintaining audio fidelity. The protocol utilizes the 21.0-24.09 kHz frequency range that is typically above human audible perception.

### 1.2 Requirements Language

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119.

### 1.3 Scope

This specification covers:
- Frequency allocation and grid structure
- Time-based encoding methodology
- QR version support (Versions 1-5)
- Boundary marker system for version detection
- Error handling and validation procedures
- Device capability assessment protocols
- Audio format compatibility requirements

## 2. Protocol Overview

### 2.1 Encoding Methodology

Sound-QR employs a time-frequency mapping approach where:
- Each QR code column corresponds to specific time intervals in the audio
- Column data is divided into 6-bit chunks with zero-padding
- Each chunk maps to one of 64 fixed frequencies in a predetermined grid
- Multiple encoding cycles provide redundancy and error correction

All Sound-QR streams MUST be encapsulated within a **UI67** container.
- **Audio Codec**: The UI67 Audio Chunk Header MUST specify `PCM` or `FLAC` to ensure lossless preservation of ultrasonic data.
- **Sample Rate**: The UI67 Header `Sample Rate` field MUST be set to at least **88200** (88.2 kHz).

### 2.2 Frequency Allocation

The protocol operates within a 3,090 Hz bandwidth from 21,000 Hz to 24,090 Hz:
- **Boundary markers**: 21,000-21,900 Hz (900 Hz range)
- **Data frequencies**: 22,200-24,090 Hz (1,890 Hz range)
- **Separation gap**: 300 Hz minimum between boundary and data ranges

## 3. Technical Specifications

### 3.1 Fixed Frequency Grid

The data encoding uses a fixed 64-frequency grid:

```
Frequency Grid: f(n) = 22,200 + (n × 30) Hz, where n = 0 to 63
Total Span: 1,890 Hz
Step Size: 30 Hz
Detection Tolerance: ±10 Hz per frequency
```


**Frequency Distribution:**
- Lowest frequency (n=0): 22,200 Hz
- Highest frequency (n=63): 24,090 Hz
- Frequency Bandwidth Allocation: ±15 Hz

### 3.2 Boundary Marker System

Version identification uses frequency-specific marker pairs:

| QR Version | Matrix Size | Start Marker | End Marker  |
|------------|-------------|--------------|-------------|
| Version 1  | 21×21       | 21,000 Hz    | 21,100 Hz   |
| Version 2  | 25×25       | 21,200 Hz    | 21,300 Hz   |
| Version 3  | 29×29       | 21,400 Hz    | 21,500 Hz   |
| Version 4  | 33×33       | 21,600 Hz    | 21,700 Hz   |
| Version 5  | 37×37       | 21,800 Hz    | 21,900 Hz   |

**Marker Requirements:**
- Duration: 100ms each
- Separation: 100 Hz between start/end markers within versions
- Inter-version separation: 100 Hz minimum between different versions

### 3.3 Column Encoding Structure

Each QR column undergoes zero-padding and chunking:

| Version | Rows | Padded Bits | Chunks | Time per Column |
|---------|------|-------------|--------|-----------------|
| 1       | 21   | 24 (add 3)  | 4      | 240ms           |
| 2       | 25   | 30 (add 5)  | 5      | 300ms           |
| 3       | 29   | 30 (add 1)  | 5      | 300ms           |
| 4       | 33   | 36 (add 3)  | 6      | 360ms           |
| 5       | 37   | 42 (add 5)  | 7      | 420ms           |

**Padding Formula:** `ceil(rows/6) * 6`
**Time per Chunk:** 60ms

### 3.4 Cycle Timing Structure

Each complete QR encoding cycle follows this structure:

```
[Start Marker 100ms] → [Data Encoding (Columns × Chunks_per_Col × 60ms)] → [End Marker 100ms] → [Gap 100ms]
```


**Complete Cycle Durations:**
- Version 1: 5,340ms (5,040ms data + 300ms overhead)
- Version 2: 7,800ms (7,500ms data + 300ms overhead)
- Version 3: 9,000ms (8,700ms data + 300ms overhead)
- Version 4: 12,180ms (11,880ms data + 300ms overhead)
- Version 5: 15,840ms (15,540ms data + 300ms overhead)

## 4. Audio Integration Requirements

### 4.1 Audio Format Compatibility

**Sample Rate Requirements:**
- **REQUIRED**: 88.2 kHz (or higher).
- *Rationale*: To capture the upper bound of 24,105 (24,090 Hz + 15 Hz), the Nyquist theorem requires a sample rate > 48210 Hz.
- Bit Depth: 16-bit minimum, 24-bit recommended

**Channel Processing:**
- Mono Input: QR data embedded directly, output remains mono
- Stereo Input: QR data in left channel only, right channel unchanged
- Mono-to-Stereo: Original duplicated to right, QR data in left

**Amplitude Specifications:**
- Embedded frequencies: -20dB relative to original audio peak
- Original audio preservation: Minimal impact on audible content

### 4.2 Minimum Duration Requirements

Encoding requires minimum audio duration for redundancy:

| Version | Minimum Duration |
|---------|------------------|
| 1       | 17 seconds       |
| 2       | 24 seconds       |
| 3       | 27 seconds       |
| 4       | 37 seconds       |
| 5       | 48 seconds       |

**Redundancy:** Minimum 3 complete cycles required
**Noisy Environments:** 48 seconds recommended for maximum reliability

## 5. Error Handling and Validation

### 5.1 Error Recovery Mechanisms

**Multi-Cycle Redundancy:**
- Minimum 3 cycles for basic redundancy
- Partial recovery possible with 2 valid cycles
- Prioritize cycles with strongest marker signals

**QR Error Correction Integration:**
- Apply standard QR error correction after matrix reconstruction
- Audio-specific 20% threshold for early corruption detection
- Standard QR can handle up to 30% corruption post-validation

## 6. Validation Protocols

### 6.1 Validation Thresholds

**Column-Level Validation:**
- Padding bit verification: All added zeros MUST be validated
- Column corruption threshold: >20% corrupted columns → discard cycle

**Cycle-Level Validation:**
- Marker pair matching: Start and end markers MUST match same version
- Timing validation: End marker MUST appear within expected timeframe
- Orphaned marker handling: Incomplete marker pairs MUST be discarded

## 7. Decoding Protocol

### 7.1 Decoding Process Flow

1. **Marker Detection:**
   - Scan entire audio for start markers
   - Prioritize versions based on device capability
2. **Cycle Validation:**
   - Calculate expected data duration from marker version
   - Verify matching end marker within timeframe
3. **Data Extraction:**
   - Process chunks in 60ms time slots
   - Map frequencies to 6-bit values (±10 Hz tolerance)
   - Reconstruct columns with padding validation
4. **Matrix Reconstruction:**
   - Apply QR error correction
   - Attempt multiple cycles if initial reconstruction fails

### 7.2 Fallback Mechanisms

If marker-based decoding fails:
- **Brute-force windows:** Divide audio into overlapping time windows
- **Version attempts:** Try all supported versions sequentially
- **Sliding detection:** 100ms increments for cycle start detection

## 8. Security Considerations

### 8.1 Audio Integrity

The protocol is designed to preserve original audio content:
- High-frequency embedding minimizes audible impact
- -20dB amplitude prevents interference with primary audio
- Steganographic techniques maintain audio quality

### 8.2 Detection Resistance

While not cryptographically secure, Sound-QR provides:
- Frequency range above typical human perception
- Minimal amplitude modification of source audio
- No standardized detection signatures in audio analysis tools

## 9. Implementation Guidelines

### 9.1 Compliance Requirements

Compliant implementations MUST:
- Support all specified QR versions (1-5) within device capabilities
- Implement proper device capability assessment
- Use exact frequency grid specifications (30 Hz steps)
- Maintain minimum audio duration requirements
- Apply specified error handling thresholds

### 9.2 Optional Extensions

Implementations MAY provide:
- Additional QR versions beyond Version 5
- Enhanced error correction algorithms
- Custom frequency ranges for specialized equipment
- Real-time encoding/decoding optimizations

## 10. IANA Considerations

This document does not require any IANA actions. The frequency allocations specified are within the audio spectrum and do not conflict with radio frequency allocations.

## 11. References

### 11.1 Normative References

[ISO/IEC 18004] ISO/IEC 18004:2015, Information technology - Automatic identification and data capture techniques - QR Code bar code symbology specification.

[RFC2119] Bradner, S., "Key words for use in RFCs to Indicate Requirement Levels", BCP 14, RFC 2119, March 1997.

[RFC-UI67] "The UI67 Multimedia Container Format", RFC 0067, Ultrasonic-in-67 Project.

### 11.2 Informative References

[AUDIO-STEG] Various audio steganography techniques and frequency analysis methods in digital signal processing literature.

[MOBILE-AUDIO] Mobile device audio hardware specifications and frequency response characteristics.

---

**Authors' Addresses:**

Sound-QR Protocol Development Team
Names: Marcus Miller

**Copyright Notice:**

Copyright (C) 2026. This document is subject to the rights, licenses and restrictions contained in BCP 78, and except as set forth therein, the authors retain all their rights.