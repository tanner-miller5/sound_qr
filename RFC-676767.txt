# RFC 676767: Sound QR - Audio-Embedded QR Code Encoding Protocol

**Request for Comments: 676767**
**Category: Experimental**
**Date: January 2026**

---

## Abstract

This document specifies the Sound QR protocol, a method for encoding QR code data into audio files using high-frequency sound encoding techniques. The protocol enables embedding QR codes into existing audio content while preserving the original audio quality, and supports decoding from both audio files and real-time microphone input. The specification defines frequency allocation, timing structures, error correction mechanisms, and device compatibility requirements for reliable cross-platform implementation.

## 1. Introduction

### 1.1 Purpose

Sound QR addresses the need for invisible data transmission through audio channels while maintaining audio fidelity. The protocol is optimized for mobile devices and consumer audio equipment, utilizing the 14.0-17.1 kHz frequency range that is typically above human audible perception but within the capabilities of standard audio hardware.

### 1.2 Requirements Language

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119.

### 1.3 Scope

This specification covers:
- Frequency allocation and grid structure
- Time-based encoding methodology
- QR version support (Versions 1-5)
- Boundary marker system for version detection
- Error handling and validation procedures
- Device capability assessment protocols
- Audio format compatibility requirements

## 2. Protocol Overview

### 2.1 Encoding Methodology

Sound QR employs a time-frequency mapping approach where:
- Each QR code column corresponds to specific time intervals in the audio
- Column data is divided into 6-bit chunks with zero-padding
- Each chunk maps to one of 64 fixed frequencies in a predetermined grid
- Multiple encoding cycles provide redundancy and error correction

### 2.2 Frequency Allocation

The protocol operates within a 3,090 Hz bandwidth from 14,000 Hz to 17,090 Hz:
- **Boundary markers**: 14,000-14,900 Hz (900 Hz range)
- **Data frequencies**: 15,200-17,090 Hz (1,890 Hz range)
- **Separation gap**: 300 Hz minimum between boundary and data ranges

## 3. Technical Specifications

### 3.1 Fixed Frequency Grid

The data encoding uses a fixed 64-frequency grid:

```
Frequency Grid: f(n) = 15,200 + (n × 30) Hz, where n = 0 to 63
Total Span: 1,890 Hz
Step Size: 30 Hz
Detection Tolerance: ±10 Hz per frequency
```


**Frequency Distribution:**
- Lowest frequency (n=0): 15,200 Hz
- Highest frequency (n=63): 17,090 Hz
- Inter-frequency buffer: ±15 Hz

### 3.2 Boundary Marker System

Version identification uses frequency-specific marker pairs:

| QR Version | Matrix Size | Start Marker | End Marker |
|------------|-------------|--------------|-------------|
| Version 1  | 21×21       | 14,000 Hz    | 14,100 Hz   |
| Version 2  | 25×25       | 14,200 Hz    | 14,300 Hz   |
| Version 3  | 29×29       | 14,400 Hz    | 14,500 Hz   |
| Version 4  | 33×33       | 14,600 Hz    | 14,700 Hz   |
| Version 5  | 37×37       | 14,800 Hz    | 14,900 Hz   |

**Marker Requirements:**
- Duration: 100ms each
- Separation: 100 Hz between start/end markers within versions
- Inter-version separation: 100 Hz minimum between different versions

### 3.3 Column Encoding Structure

Each QR column undergoes zero-padding and chunking:

| Version | Rows | Padded Bits | Chunks | Time per Column |
|---------|------|-------------|--------|-----------------|
| 1       | 21   | 24 (add 3)  | 4      | 40ms           |
| 2       | 25   | 30 (add 5)  | 5      | 50ms           |
| 3       | 29   | 30 (add 1)  | 5      | 50ms           |
| 4       | 33   | 36 (add 3)  | 6      | 60ms           |
| 5       | 37   | 42 (add 5)  | 7      | 70ms           |

**Padding Formula:** `ceil(rows/6) * 6`
**Time per Chunk:** 10ms

### 3.4 Cycle Timing Structure

Each complete QR encoding cycle follows this structure:

```
[Start Marker 100ms] → [Data Encoding] → [End Marker 100ms] → [Gap 100ms]
```


**Complete Cycle Durations:**
- Version 1: 1,140ms (840ms data + 300ms overhead)
- Version 2: 1,550ms (1,250ms data + 300ms overhead)
- Version 3: 1,750ms (1,450ms data + 300ms overhead)
- Version 4: 2,280ms (1,980ms data + 300ms overhead)
- Version 5: 2,890ms (2,590ms data + 300ms overhead)

## 4. Audio Integration Requirements

### 4.1 Audio Format Compatibility

**Sample Rate Requirements:**
- Minimum: 44.1 kHz (CD quality)
- Recommended: 48 kHz (digital standard)
- Bit Depth: 16-bit minimum, 24-bit recommended

**Channel Processing:**
- Mono Input: QR data embedded directly, output remains mono
- Stereo Input: QR data in left channel only, right channel unchanged
- Mono-to-Stereo: Original duplicated to right, QR data in left

**Amplitude Specifications:**
- Embedded frequencies: -20dB relative to original audio peak
- Original audio preservation: Minimal impact on audible content

### 4.2 Minimum Duration Requirements

Encoding requires minimum audio duration for redundancy:

| Version | Minimum Duration | Recommended Duration |
|---------|------------------|---------------------|
| 1       | 4 seconds        | 6+ seconds          |
| 2       | 5 seconds        | 7+ seconds          |
| 3       | 6 seconds        | 8+ seconds          |
| 4       | 7 seconds        | 10+ seconds         |
| 5       | 9 seconds        | 13+ seconds         |

**Redundancy:** Minimum 3 complete cycles required
**Noisy Environments:** 15+ seconds recommended for maximum reliability

## 5. Device Compatibility and Capability Assessment

### 5.1 Device Categories

Devices are classified based on frequency response capabilities:

**Full Capability (17.1+ kHz response):**
- All QR versions supported (1-5)
- Full reliability across entire operational range

**Standard Capability (16.0-17.0 kHz response):**
- Versions 1-4 fully supported
- Version 5 may have reduced reliability

**Limited Capability (15.5-15.9 kHz response):**
- Versions 1-3 supported only
- Versions 4-5 not recommended

### 5.2 Capability Assessment Protocol

Implementation MUST perform device assessment:

1. **Frequency Response Test:**
   - Sweep sine wave from 14.0-17.1 kHz at -30dB
   - Measure response at key frequencies: 14.5, 15.5, 16.5, 17.1 kHz

2. **Version Priority Assignment:**
   - Full: Try versions 1,2,3,4,5 (all supported)
   - Standard: Try versions 1,2,3,4 first, then 5 with warning
   - Limited: Try versions 1,2,3 only (skip 4,5)

## 6. Error Handling and Validation

### 6.1 Validation Thresholds

**Column-Level Validation:**
- Padding bit verification: All added zeros MUST be validated
- Column corruption threshold: >20% corrupted columns → discard cycle

**Cycle-Level Validation:**
- Marker pair matching: Start and end markers MUST match same version
- Timing validation: End marker MUST appear within expected timeframe
- Orphaned marker handling: Incomplete marker pairs MUST be discarded

### 6.2 Error Recovery Mechanisms

**Multi-Cycle Redundancy:**
- Minimum 3 cycles for basic redundancy
- Partial recovery possible with 2 valid cycles
- Prioritize cycles with strongest marker signals

**QR Error Correction Integration:**
- Apply standard QR error correction after matrix reconstruction
- Audio-specific 20% threshold for early corruption detection
- Standard QR can handle up to 30% corruption post-validation

## 7. Decoding Protocol

### 7.1 Decoding Process Flow

1. **Device Capability Assessment** (Section 5.2)
2. **Marker Detection:**
   - Scan entire audio for start markers
   - Prioritize versions based on device capability
3. **Cycle Validation:**
   - Calculate expected data duration from marker version
   - Verify matching end marker within timeframe
4. **Data Extraction:**
   - Process chunks in 10ms time slots
   - Map frequencies to 6-bit values (±10 Hz tolerance)
   - Reconstruct columns with padding validation
5. **Matrix Reconstruction:**
   - Apply QR error correction
   - Attempt multiple cycles if initial reconstruction fails

### 7.2 Fallback Mechanisms

If marker-based decoding fails:
- **Brute-force windows:** Divide audio into overlapping time windows
- **Version attempts:** Try all supported versions sequentially
- **Sliding detection:** 100ms increments for cycle start detection

## 8. Security Considerations

### 8.1 Audio Integrity

The protocol is designed to preserve original audio content:
- High-frequency embedding minimizes audible impact
- -20dB amplitude prevents interference with primary audio
- Steganographic techniques maintain audio quality

### 8.2 Detection Resistance

While not cryptographically secure, Sound QR provides:
- Frequency range above typical human perception
- Minimal amplitude modification of source audio
- No standardized detection signatures in audio analysis tools

## 9. Implementation Guidelines

### 9.1 Compliance Requirements

Compliant implementations MUST:
- Support all specified QR versions (1-5) within device capabilities
- Implement proper device capability assessment
- Use exact frequency grid specifications (30 Hz steps)
- Maintain minimum audio duration requirements
- Apply specified error handling thresholds

### 9.2 Optional Extensions

Implementations MAY provide:
- Additional QR versions beyond Version 5
- Enhanced error correction algorithms
- Custom frequency ranges for specialized equipment
- Real-time encoding/decoding optimizations

## 10. IANA Considerations

This document does not require any IANA actions. The frequency allocations specified are within the audio spectrum and do not conflict with radio frequency allocations.

## 11. References

### 11.1 Normative References

[ISO/IEC 18004] ISO/IEC 18004:2015, Information technology - Automatic identification and data capture techniques - QR Code bar code symbology specification.

[RFC2119] Bradner, S., "Key words for use in RFCs to Indicate Requirement Levels", BCP 14, RFC 2119, March 1997.

### 11.2 Informative References

[AUDIO-STEG] Various audio steganography techniques and frequency analysis methods in digital signal processing literature.

[MOBILE-AUDIO] Mobile device audio hardware specifications and frequency response characteristics.

---

**Authors' Addresses:**

Sound QR Protocol Development Team
Email:

**Copyright Notice:**

Copyright (C) 2026. This document is subject to the rights, licenses and restrictions contained in BCP 78, and except as set forth therein, the authors retain all their rights.